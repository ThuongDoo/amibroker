import { Inject, Injectable, forwardRef } from '@nestjs/common';
import { InjectModel } from '@nestjs/sequelize';
import { EventsGateway } from 'src/events/events.gateway';
import { Buysell } from './buysell.model';
import { OrderItem, where } from 'sequelize';
import moment from 'moment';

@Injectable()
export class StockService {
  constructor(
    @Inject(forwardRef(() => EventsGateway))
    private eventsGateway: EventsGateway,

    @InjectModel(Buysell)
    private buysellModel: typeof Buysell,
  ) {}
  stockData = [
    {
      Ticker: 'ACB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '27.50',
      Volume: '9785600',
      GiatriGD: '269104005120',
      'Tang/Giam': '0.20',
      'Tang/Giam (%)': '0.73',
      PPSEPA: '1',
      RSRating: '25.93',
      "RS-O'neil": '34',
      RSI: '62.76',
      MACD: '0.67',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '0',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '1',
      ADX: '49.74',
      'DMI ': '33.97',
      'DMI-': '12.25',
      MFI: '69.77',
      MA10: '0',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '4.13',
      'P/E': '6.66',
      BookValuePerShare: '18.27',
      'P/B': '1.51',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '23999994134528.00',
      'P/CF': '0.00',
      'Dividend Yield (%)': '3.64',
      TyleCPluuhanh: '3884050432.00',
      'Free-Float': '85.00',
      Beta: '0.80',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '2.42',
      'ROE (%)': '24.80',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '39.57',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'BCM',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '63.30',
      Volume: '775900',
      GiatriGD: '49114468352',
      'Tang/Giam': '0.00',
      'Tang/Giam (%)': '0.00',
      PPSEPA: '0',
      RSRating: '-7.01',
      "RS-O'neil": '-17',
      RSI: '50.32',
      MACD: '0.63',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '0',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '0',
      ADX: '27.13',
      'DMI ': '23.93',
      'DMI-': '19.37',
      MFI: '64.51',
      MA10: '0',
      MA15: '0',
      MA20: '0',
      MA50: '1',
      MA100: '1',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '2.36',
      'P/E': '26.84',
      BookValuePerShare: '18.44',
      'P/B': '3.43',
      DTtrenCP: '7.80',
      'P/S': '8.12',
      OCF: '-701685366784.00',
      'P/CF': '-0.09',
      'Dividend Yield (%)': '1.26',
      TyleCPluuhanh: '1035000000.00',
      'Free-Float': '25324856.00',
      Beta: '0.71',
      'Bienloinhuangop (%)': '28.67',
      'Bienloinhuanhoatdong %': '35.14',
      'ROA (%)': '4.81',
      'ROE (%)': '13.18',
      Tangtruongdoanhthutheoquy: '25.68',
      LNGtrenCP: '4.17',
      TangtruongLNhangquy: '3542.37',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Dich vu bat Dong san',
    },
    {
      Ticker: 'BID',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '53.60',
      Volume: '1533000',
      GiatriGD: '82168799232',
      'Tang/Giam': '1.60',
      'Tang/Giam (%)': '3.08',
      PPSEPA: '1',
      RSRating: '34.19',
      "RS-O'neil": '49',
      RSI: '79.77',
      MACD: '1.45',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '1',
      ADX: '46.84',
      'DMI ': '43.28',
      'DMI-': '8.41',
      MFI: '73.40',
      MA10: '1',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '1',
      NoSupply: '0',
      GiaCaoNhat52W: '1',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '3.78',
      'P/E': '14.18',
      BookValuePerShare: '21.56',
      'P/B': '2.49',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '28791709630464.00',
      'P/CF': '0.01',
      'Dividend Yield (%)': '0.37',
      TyleCPluuhanh: '5700435968.00',
      'Free-Float': '160880720.00',
      Beta: '0.97',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '0.97',
      'ROE (%)': '18.98',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '45.10',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'BVH',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '42.05',
      Volume: '353400',
      GiatriGD: '14860470272',
      'Tang/Giam': '0.10',
      'Tang/Giam (%)': '0.24',
      PPSEPA: '0',
      RSRating: '-1.24',
      "RS-O'neil": '-5',
      RSI: '57.57',
      MACD: '0.46',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '1',
      Trend: '0',
      ADX: '35.49',
      'DMI ': '27.28',
      'DMI-': '14.33',
      MFI: '52.28',
      MA10: '0',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '2.32',
      'P/E': '18.12',
      BookValuePerShare: '29.90',
      'P/B': '1.41',
      DTtrenCP: '53.93',
      'P/S': '0.78',
      OCF: '2735735308288.00',
      'P/CF': '0.01',
      'Dividend Yield (%)': '2.27',
      TyleCPluuhanh: '742322752.00',
      'Free-Float': '74232272.00',
      Beta: '0.76',
      'Bienloinhuangop (%)': '4.49',
      'Bienloinhuanhoatdong %': '5.34',
      'ROA (%)': '0.81',
      'ROE (%)': '7.92',
      Tangtruongdoanhthutheoquy: '-0.46',
      LNGtrenCP: '-3.35',
      TangtruongLNhangquy: '5.00',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: '',
    },
    {
      Ticker: 'CTG',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '35.65',
      Volume: '6391800',
      GiatriGD: '227867672576',
      'Tang/Giam': '0.45',
      'Tang/Giam (%)': '1.28',
      PPSEPA: '1',
      RSRating: '33.47',
      "RS-O'neil": '46',
      RSI: '72.20',
      MACD: '1.43',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '1',
      ADX: '64.24',
      'DMI ': '40.83',
      'DMI-': '5.37',
      MFI: '69.33',
      MA10: '1',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '3.72',
      'P/E': '9.58',
      BookValuePerShare: '23.76',
      'P/B': '1.50',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '7141948129280.00',
      'P/CF': '0.03',
      'Dividend Yield (%)': '2.24',
      TyleCPluuhanh: '5369991680.00',
      'Free-Float': '744680896.00',
      Beta: '0.97',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '1.04',
      'ROE (%)': '16.96',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '43.64',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'FPT',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '108.00',
      Volume: '4466700',
      GiatriGD: '482403581952',
      'Tang/Giam': '4.10',
      'Tang/Giam (%)': '3.95',
      PPSEPA: '1',
      RSRating: '31.95',
      "RS-O'neil": '42',
      RSI: '73.59',
      MACD: '2.65',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '1',
      ADX: '42.78',
      'DMI ': '35.00',
      'DMI-': '10.93',
      MFI: '75.08',
      MA10: '1',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '1',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '5.10',
      'P/E': '21.20',
      BookValuePerShare: '23.58',
      'P/B': '4.58',
      DTtrenCP: '41.43',
      'P/S': '2.61',
      OCF: '3975063011328.00',
      'P/CF': '0.03',
      'Dividend Yield (%)': '0.93',
      TyleCPluuhanh: '1269968896.00',
      'Free-Float': '627124096.00',
      Beta: '0.82',
      'Bienloinhuangop (%)': '14.81',
      'Bienloinhuanhoatdong %': '17.32',
      'ROA (%)': '11.56',
      'ROE (%)': '23.40',
      Tangtruongdoanhthutheoquy: '19.54',
      LNGtrenCP: '16.01',
      TangtruongLNhangquy: '27.88',
      San: 'HSX',
      LinhVuc: '9000 Cong nghe Thong tin',
      Nganh: 'Cong nghe phan mem',
    },
    {
      Ticker: 'GAS',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '76.20',
      Volume: '1094800',
      GiatriGD: '83423756288',
      'Tang/Giam': '-0.20',
      'Tang/Giam (%)': '-0.26',
      PPSEPA: '0',
      RSRating: '-4.57',
      "RS-O'neil": '-9',
      RSI: '48.08',
      MACD: '0.29',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '0',
      ADX: '19.50',
      'DMI ': '24.25',
      'DMI-': '22.38',
      MFI: '51.09',
      MA10: '0',
      MA15: '0',
      MA20: '0',
      MA50: '1',
      MA100: '0',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '5.05',
      'P/E': '15.08',
      BookValuePerShare: '28.43',
      'P/B': '2.68',
      DTtrenCP: '39.17',
      'P/S': '1.95',
      OCF: '3172665131008.00',
      'P/CF': '0.06',
      'Dividend Yield (%)': '4.72',
      TyleCPluuhanh: '2296739840.00',
      'Free-Float': '95697504.00',
      Beta: '0.74',
      'Bienloinhuangop (%)': '13.11',
      'Bienloinhuanhoatdong %': '16.25',
      'ROA (%)': '13.62',
      'ROE (%)': '18.35',
      Tangtruongdoanhthutheoquy: '-10.63',
      LNGtrenCP: '7.37',
      TangtruongLNhangquy: '-16.22',
      San: 'HSX',
      LinhVuc: '7000 Tien ich Cong dong',
      Nganh: 'Phan phoi khi Dot',
    },
    {
      Ticker: 'GVR',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '28.80',
      Volume: '7028600',
      GiatriGD: '202423681024',
      'Tang/Giam': '1.25',
      'Tang/Giam (%)': '4.54',
      PPSEPA: '1',
      RSRating: '57.70',
      "RS-O'neil": '66',
      RSI: '79.95',
      MACD: '1.85',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '1',
      ADX: '46.38',
      'DMI ': '36.89',
      'DMI-': '12.87',
      MFI: '75.17',
      MA10: '1',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '1',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '0.65',
      'P/E': '44.56',
      BookValuePerShare: '13.71',
      'P/B': '2.10',
      DTtrenCP: '5.52',
      'P/S': '5.22',
      OCF: '-1690343964672.00',
      'P/CF': '-0.07',
      'Dividend Yield (%)': '1.22',
      TyleCPluuhanh: '4000000000.00',
      'Free-Float': '103892584.00',
      Beta: '1.84',
      'Bienloinhuangop (%)': '15.26',
      'Bienloinhuanhoatdong %': '12.43',
      'ROA (%)': '3.30',
      'ROE (%)': '4.77',
      Tangtruongdoanhthutheoquy: '-13.24',
      LNGtrenCP: '1.19',
      TangtruongLNhangquy: '27.73',
      San: 'HSX',
      LinhVuc: '1000 Nguyen vat lieu',
      Nganh: 'Hoa chat co ban - San pham nhua',
    },
    {
      Ticker: 'HDB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '22.70',
      Volume: '5605100',
      GiatriGD: '127235776512',
      'Tang/Giam': '0.20',
      'Tang/Giam (%)': '0.89',
      PPSEPA: '1',
      RSRating: '34.20',
      "RS-O'neil": '44',
      RSI: '59.09',
      MACD: '0.65',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '0',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '1',
      ADX: '54.26',
      'DMI ': '30.14',
      'DMI-': '16.09',
      MFI: '69.34',
      MA10: '0',
      MA15: '0',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '3.48',
      'P/E': '6.52',
      BookValuePerShare: '16.04',
      'P/B': '1.42',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '52501587951616.00',
      'P/CF': '0.00',
      'Dividend Yield (%)': '4.41',
      TyleCPluuhanh: '2892550656.00',
      'Free-Float': '676144896.00',
      Beta: '0.79',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '1.98',
      'ROE (%)': '23.59',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '92.59',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'HPG',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '28.80',
      Volume: '19221700',
      GiatriGD: '553584951296',
      'Tang/Giam': '0.40',
      'Tang/Giam (%)': '1.41',
      PPSEPA: '1',
      RSRating: '17.31',
      "RS-O'neil": '27',
      RSI: '59.41',
      MACD: '0.28',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '1',
      ADX: '18.08',
      'DMI ': '23.45',
      'DMI-': '19.60',
      MFI: '66.13',
      MA10: '1',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '1.18',
      'P/E': '24.50',
      BookValuePerShare: '17.69',
      'P/B': '1.63',
      DTtrenCP: '20.46',
      'P/S': '1.41',
      OCF: '5410273624064.00',
      'P/CF': '0.03',
      'Dividend Yield (%)': '1.74',
      TyleCPluuhanh: '5814785536.00',
      'Free-Float': '1987969536.00',
      Beta: '1.32',
      'Bienloinhuangop (%)': '5.72',
      'Bienloinhuanhoatdong %': '6.43',
      'ROA (%)': '3.82',
      'ROE (%)': '6.87',
      Tangtruongdoanhthutheoquy: '-15.70',
      LNGtrenCP: '2.22',
      TangtruongLNhangquy: '0.00',
      San: 'HSX',
      LinhVuc: '1000 Nguyen vat lieu',
      Nganh: 'Thep',
    },
    {
      Ticker: 'MBB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '24.00',
      Volume: '21383500',
      GiatriGD: '513203994624',
      'Tang/Giam': '0.10',
      'Tang/Giam (%)': '0.42',
      PPSEPA: '1',
      RSRating: '39.36',
      "RS-O'neil": '44',
      RSI: '77.38',
      MACD: '0.89',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '1',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '1',
      ADX: '62.45',
      'DMI ': '37.50',
      'DMI-': '7.00',
      MFI: '61.01',
      MA10: '1',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '3.97',
      'P/E': '6.05',
      BookValuePerShare: '18.55',
      'P/B': '1.29',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '50354578259968.00',
      'P/CF': '0.00',
      'Dividend Yield (%)': '2.08',
      TyleCPluuhanh: '5214084096.00',
      'Free-Float': '1446856064.00',
      Beta: '0.96',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '2.47',
      'ROE (%)': '23.45',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '45.20',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'MSN',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '66.70',
      Volume: '2921700',
      GiatriGD: '194877374464',
      'Tang/Giam': '0.00',
      'Tang/Giam (%)': '0.00',
      PPSEPA: '0',
      RSRating: '-6.41',
      "RS-O'neil": '-15',
      RSI: '51.36',
      MACD: '0.38',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '1',
      Trend: '0',
      ADX: '17.81',
      'DMI ': '23.44',
      'DMI-': '19.19',
      MFI: '54.33',
      MA10: '0',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '0.29',
      'P/E': '227.94',
      BookValuePerShare: '26.72',
      'P/B': '2.50',
      DTtrenCP: '54.69',
      'P/S': '1.22',
      OCF: '-1874676023296.00',
      'P/CF': '-0.05',
      'Dividend Yield (%)': '1.20',
      TyleCPluuhanh: '1430843392.00',
      'Free-Float': '411139136.00',
      Beta: '1.32',
      'Bienloinhuangop (%)': '2.39',
      'Bienloinhuanhoatdong %': '3.00',
      'ROA (%)': '0.29',
      'ROE (%)': '1.12',
      Tangtruongdoanhthutheoquy: '2.80',
      LNGtrenCP: '15.46',
      TangtruongLNhangquy: '-88.79',
      San: 'HSX',
      LinhVuc: '3000 Hang Tieu dung',
      Nganh: 'San pham thuc pham',
    },
    {
      Ticker: 'MWG',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '44.35',
      Volume: '13530900',
      GiatriGD: '600095391744',
      'Tang/Giam': '0.35',
      'Tang/Giam (%)': '0.80',
      PPSEPA: '0',
      RSRating: '6.46',
      "RS-O'neil": '-5',
      RSI: '44.71',
      MACD: '0.32',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '0',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '0',
      ADX: '24.27',
      'DMI ': '17.79',
      'DMI-': '28.46',
      MFI: '38.34',
      MA10: '0',
      MA15: '0',
      MA20: '0',
      MA50: '1',
      MA100: '1',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '0.11',
      'P/E': '386.82',
      BookValuePerShare: '15.97',
      'P/B': '2.78',
      DTtrenCP: '80.88',
      'P/S': '0.55',
      OCF: '1166712373248.00',
      'P/CF': '0.06',
      'Dividend Yield (%)': '1.13',
      TyleCPluuhanh: '1462398336.00',
      'Free-Float': '294241856.00',
      Beta: '1.37',
      'Bienloinhuangop (%)': '0.14',
      'Bienloinhuanhoatdong %': '0.86',
      'ROA (%)': '0.29',
      'ROE (%)': '0.71',
      Tangtruongdoanhthutheoquy: '-11.50',
      LNGtrenCP: '15.40',
      TangtruongLNhangquy: '-85.42',
      San: 'HSX',
      LinhVuc: '5000 Dich vu Tieu dung',
      Nganh: 'Ban le tong hop',
    },
    {
      Ticker: 'PLX',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '35.20',
      Volume: '444000',
      GiatriGD: '15628800000',
      'Tang/Giam': '0.10',
      'Tang/Giam (%)': '0.28',
      PPSEPA: '0',
      RSRating: '-1.93',
      "RS-O'neil": '1',
      RSI: '51.75',
      MACD: '0.22',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '1',
      Trend: '0',
      ADX: '25.35',
      'DMI ': '27.64',
      'DMI-': '20.03',
      MFI: '56.99',
      MA10: '0',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '1',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '2.21',
      'P/E': '15.91',
      BookValuePerShare: '22.97',
      'P/B': '1.53',
      DTtrenCP: '215.85',
      'P/S': '0.16',
      OCF: '1696520077312.00',
      'P/CF': '0.03',
      'Dividend Yield (%)': '1.99',
      TyleCPluuhanh: '1270592256.00',
      'Free-Float': '108523192.00',
      Beta: '1.02',
      'Bienloinhuangop (%)': '1.11',
      'Bienloinhuanhoatdong %': '1.39',
      'ROA (%)': '3.67',
      'ROE (%)': '9.87',
      Tangtruongdoanhthutheoquy: '-9.80',
      LNGtrenCP: '12.00',
      TangtruongLNhangquy: '-45.12',
      San: 'HSX',
      LinhVuc: '0001 Dau khi',
      Nganh: 'Tham do va san xuat dau khi',
    },
    {
      Ticker: 'POW',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '11.55',
      Volume: '6812700',
      GiatriGD: '78686691328',
      'Tang/Giam': '0.05',
      'Tang/Giam (%)': '0.43',
      PPSEPA: '0',
      RSRating: '-6.49',
      "RS-O'neil": '-1',
      RSI: '51.28',
      MACD: '0.07',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '1',
      Trend: '0',
      ADX: '31.49',
      'DMI ': '30.19',
      'DMI-': '18.87',
      MFI: '51.87',
      MA10: '0',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '0.46',
      'P/E': '25.16',
      BookValuePerShare: '14.59',
      'P/B': '0.79',
      DTtrenCP: '11.93',
      'P/S': '0.97',
      OCF: '2159906652160.00',
      'P/CF': '0.01',
      'Dividend Yield (%)': '1.73',
      TyleCPluuhanh: '2341871616.00',
      'Free-Float': '468374336.00',
      Beta: '1.07',
      'Bienloinhuangop (%)': '4.76',
      'Bienloinhuanhoatdong %': '4.69',
      'ROA (%)': '1.69',
      'ROE (%)': '3.20',
      Tangtruongdoanhthutheoquy: '-1.03',
      LNGtrenCP: '0.93',
      TangtruongLNhangquy: '-51.39',
      San: 'HSX',
      LinhVuc: '7000 Tien ich Cong dong',
      Nganh: 'San xuat va cung cap Dien truyen thong',
    },
    {
      Ticker: 'SAB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '56.60',
      Volume: '809500',
      GiatriGD: '45817700352',
      'Tang/Giam': '-0.40',
      'Tang/Giam (%)': '-0.70',
      PPSEPA: '0',
      RSRating: '-21.51',
      "RS-O'neil": '-27',
      RSI: '36.12',
      MACD: '-0.77',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '0',
      ADX: '22.71',
      'DMI ': '18.27',
      'DMI-': '28.89',
      MFI: '36.50',
      MA10: '0',
      MA15: '0',
      MA20: '0',
      MA50: '0',
      MA100: '0',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '3.21',
      'P/E': '17.63',
      BookValuePerShare: '19.87',
      'P/B': '2.85',
      DTtrenCP: '23.75',
      'P/S': '2.38',
      OCF: '-16048282624.00',
      'P/CF': '-4.52',
      'Dividend Yield (%)': '2.65',
      TyleCPluuhanh: '1282562432.00',
      'Free-Float': '70540928.00',
      Beta: '0.67',
      'Bienloinhuangop (%)': '13.97',
      'Bienloinhuanhoatdong %': '17.74',
      'ROA (%)': '12.02',
      'ROE (%)': '16.45',
      Tangtruongdoanhthutheoquy: '-12.85',
      LNGtrenCP: '7.09',
      TangtruongLNhangquy: '-9.27',
      San: 'HSX',
      LinhVuc: '3000 Hang Tieu dung',
      Nganh: 'Bia',
    },
    {
      Ticker: 'SHB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '11.75',
      Volume: '29265300',
      GiatriGD: '343867260928',
      'Tang/Giam': '-0.10',
      'Tang/Giam (%)': '-0.84',
      PPSEPA: '1',
      RSRating: '12.16',
      "RS-O'neil": '23',
      RSI: '48.21',
      MACD: '0.05',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '0',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '0',
      ADX: '24.13',
      'DMI ': '23.32',
      'DMI-': '17.90',
      MFI: '34.84',
      MA10: '0',
      MA15: '0',
      MA20: '0',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '2.06',
      'P/E': '5.69',
      BookValuePerShare: '13.78',
      'P/B': '0.85',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '25303592206336.00',
      'P/CF': '0.00',
      'Dividend Yield (%)': '0.00',
      TyleCPluuhanh: '3618902016.00',
      'Free-Float': '1404269568.00',
      Beta: '1.29',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '1.26',
      'ROE (%)': '16.10',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '21.00',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'SSB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '22.90',
      Volume: '1290200',
      GiatriGD: '29545580544',
      'Tang/Giam': '-0.10',
      'Tang/Giam (%)': '-0.43',
      PPSEPA: '0',
      RSRating: '-9.47',
      "RS-O'neil": '-10',
      RSI: '43.27',
      MACD: '-0.04',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '1',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '0',
      ADX: '26.25',
      'DMI ': '11.30',
      'DMI-': '17.77',
      MFI: '48.43',
      MA10: '0',
      MA15: '0',
      MA20: '0',
      MA50: '0',
      MA100: '0',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '1.47',
      'P/E': '15.54',
      BookValuePerShare: '12.14',
      'P/B': '1.89',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '2570924064768.00',
      'P/CF': '0.02',
      'Dividend Yield (%)': '0.00',
      TyleCPluuhanh: '2495699968.00',
      'Free-Float': '0.00',
      Beta: '0.41',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '1.48',
      'ROE (%)': '13.01',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '38.68',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'SSI',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '35.10',
      Volume: '26875500',
      GiatriGD: '943329968128',
      'Tang/Giam': '0.95',
      'Tang/Giam (%)': '2.78',
      PPSEPA: '1',
      RSRating: '30.90',
      "RS-O'neil": '51',
      RSI: '59.80',
      MACD: '0.36',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '0',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '1',
      ADX: '20.77',
      'DMI ': '26.29',
      'DMI-': '22.17',
      MFI: '54.53',
      MA10: '1',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '1.53',
      'P/E': '22.95',
      BookValuePerShare: '15.50',
      'P/B': '2.26',
      DTtrenCP: '4.77',
      'P/S': '7.35',
      OCF: '-12656317562880.00',
      'P/CF': '-0.00',
      'Dividend Yield (%)': '2.85',
      TyleCPluuhanh: '1499138688.00',
      'Free-Float': '360561824.00',
      Beta: '1.80',
      'Bienloinhuangop (%)': '32.06',
      'Bienloinhuanhoatdong %': '39.78',
      'ROA (%)': '3.78',
      'ROE (%)': '10.05',
      Tangtruongdoanhthutheoquy: '12.97',
      LNGtrenCP: '3.15',
      TangtruongLNhangquy: '120.06',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: '',
    },
    {
      Ticker: 'STB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '30.50',
      Volume: '24763200',
      GiatriGD: '755277561856',
      'Tang/Giam': '-0.15',
      'Tang/Giam (%)': '-0.49',
      PPSEPA: '0',
      RSRating: '6.87',
      "RS-O'neil": '21',
      RSI: '52.46',
      MACD: '0.39',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '0',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '0',
      ADX: '38.29',
      'DMI ': '26.32',
      'DMI-': '18.19',
      MFI: '46.53',
      MA10: '0',
      MA15: '0',
      MA20: '0',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '4.09',
      'P/E': '7.45',
      BookValuePerShare: '24.26',
      'P/B': '1.26',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '-661400977408.00',
      'P/CF': '-0.09',
      'Dividend Yield (%)': '0.00',
      TyleCPluuhanh: '1885215744.00',
      'Free-Float': '1713470720.00',
      Beta: '1.35',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '1.22',
      'ROE (%)': '18.30',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '29.00',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'TCB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '41.20',
      Volume: '9615100',
      GiatriGD: '396142116864',
      'Tang/Giam': '1.10',
      'Tang/Giam (%)': '2.74',
      PPSEPA: '1',
      RSRating: '34.55',
      "RS-O'neil": '40',
      RSI: '84.82',
      MACD: '1.77',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '1',
      ADX: '48.04',
      'DMI ': '49.15',
      'DMI-': '6.39',
      MFI: '85.03',
      MA10: '1',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '1',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '5.11',
      'P/E': '8.06',
      BookValuePerShare: '37.37',
      'P/B': '1.10',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '14260693368832.00',
      'P/CF': '0.01',
      'Dividend Yield (%)': '0.00',
      TyleCPluuhanh: '3522510848.00',
      'Free-Float': '2275090944.00',
      Beta: '1.14',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '2.33',
      'ROE (%)': '14.69',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '25.24',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'TPB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '19.15',
      Volume: '8201000',
      GiatriGD: '157049159680',
      'Tang/Giam': '0.05',
      'Tang/Giam (%)': '0.26',
      PPSEPA: '0',
      RSRating: '9.58',
      "RS-O'neil": '21',
      RSI: '60.86',
      MACD: '0.34',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '1',
      ADX: '31.68',
      'DMI ': '33.69',
      'DMI-': '11.86',
      MFI: '58.37',
      MA10: '1',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '2.03',
      'P/E': '9.45',
      BookValuePerShare: '14.87',
      'P/B': '1.29',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '-14022734774272.00',
      'P/CF': '-0.00',
      'Dividend Yield (%)': '13.05',
      TyleCPluuhanh: '2201635072.00',
      'Free-Float': '489943904.00',
      Beta: '1.00',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '1.30',
      'ROE (%)': '13.74',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '-67.49',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'VCB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '89.50',
      Volume: '722000',
      GiatriGD: '64618999808',
      'Tang/Giam': '0.60',
      'Tang/Giam (%)': '0.67',
      PPSEPA: '0',
      RSRating: '6.45',
      "RS-O'neil": '17',
      RSI: '49.98',
      MACD: '0.40',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '0',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '0',
      ADX: '15.08',
      'DMI ': '15.15',
      'DMI-': '18.95',
      MFI: '52.12',
      MA10: '0',
      MA15: '0',
      MA20: '0',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '5.91',
      'P/E': '15.14',
      BookValuePerShare: '11.04',
      'P/B': '8.11',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '8811414814720.00',
      'P/CF': '0.06',
      'Dividend Yield (%)': '1.34',
      TyleCPluuhanh: '5589091328.00',
      'Free-Float': '407976512.00',
      Beta: '0.55',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '1.81',
      'ROE (%)': '33.09',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '-5.77',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'VHM',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '43.35',
      Volume: '7000000',
      GiatriGD: '303449997312',
      'Tang/Giam': '0.05',
      'Tang/Giam (%)': '0.12',
      PPSEPA: '0',
      RSRating: '-3.32',
      "RS-O'neil": '-8',
      RSI: '53.04',
      MACD: '0.59',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '0',
      ADX: '19.40',
      'DMI ': '33.85',
      'DMI-': '26.72',
      MFI: '48.72',
      MA10: '0',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '7.61',
      'P/E': '5.70',
      BookValuePerShare: '41.88',
      'P/B': '1.04',
      DTtrenCP: '23.73',
      'P/S': '1.83',
      OCF: '4214188933120.00',
      'P/CF': '0.04',
      'Dividend Yield (%)': '4.61',
      TyleCPluuhanh: '4354367488.00',
      'Free-Float': '822378496.00',
      Beta: '1.34',
      'Bienloinhuangop (%)': '32.21',
      'Bienloinhuanhoatdong %': '42.88',
      'ROA (%)': '8.19',
      'ROE (%)': '20.02',
      Tangtruongdoanhthutheoquy: '65.62',
      LNGtrenCP: '8.17',
      TangtruongLNhangquy: '-90.75',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Cac cong ty Dau co va phat trien bat Dong san',
    },
    {
      Ticker: 'VIB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '21.95',
      Volume: '4287500',
      GiatriGD: '94110629888',
      'Tang/Giam': '-0.05',
      'Tang/Giam (%)': '-0.23',
      PPSEPA: '1',
      RSRating: '20.03',
      "RS-O'neil": '26',
      RSI: '63.01',
      MACD: '0.55',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '1',
      ADX: '44.21',
      'DMI ': '28.46',
      'DMI-': '16.15',
      MFI: '55.16',
      MA10: '0',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '1',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '3.38',
      'P/E': '6.50',
      BookValuePerShare: '14.96',
      'P/B': '1.47',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '871077969920.00',
      'P/CF': '0.06',
      'Dividend Yield (%)': '2.73',
      TyleCPluuhanh: '2536807424.00',
      'Free-Float': '647144000.00',
      Beta: '1.16',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '2.28',
      'ROE (%)': '24.26',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '-14.20',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'VIC',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '44.60',
      Volume: '5089400',
      GiatriGD: '226987229184',
      'Tang/Giam': '-0.60',
      'Tang/Giam (%)': '-1.33',
      PPSEPA: '0',
      RSRating: '-7.77',
      "RS-O'neil": '-12',
      RSI: '51.90',
      MACD: '0.77',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '0',
      ADX: '31.74',
      'DMI ': '35.22',
      'DMI-': '28.79',
      MFI: '50.61',
      MA10: '0',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '0.54',
      'P/E': '82.68',
      BookValuePerShare: '38.71',
      'P/B': '1.15',
      DTtrenCP: '42.27',
      'P/S': '1.06',
      OCF: '1064986017792.00',
      'P/CF': '0.16',
      'Dividend Yield (%)': '0.00',
      TyleCPluuhanh: '3823661568.00',
      'Free-Float': '1183850752.00',
      Beta: '1.21',
      'Bienloinhuangop (%)': '1.27',
      'Bienloinhuanhoatdong %': '-2.81',
      'ROA (%)': '0.33',
      'ROE (%)': '1.45',
      Tangtruongdoanhthutheoquy: '59.14',
      LNGtrenCP: '6.28',
      TangtruongLNhangquy: '-110.18',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Cac cong ty Dau co va phat trien bat Dong san',
    },
    {
      Ticker: 'VJC',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '104.50',
      Volume: '605600',
      GiatriGD: '63285198848',
      'Tang/Giam': '0.70',
      'Tang/Giam (%)': '0.67',
      PPSEPA: '0',
      RSRating: '3.24',
      "RS-O'neil": '6',
      RSI: '47.59',
      MACD: '-0.42',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '0',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '1',
      ADX: '33.67',
      'DMI ': '11.72',
      'DMI-': '19.47',
      MFI: '52.66',
      MA10: '1',
      MA15: '0',
      MA20: '0',
      MA50: '0',
      MA100: '0',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '0.63',
      'P/E': '164.99',
      BookValuePerShare: '28.86',
      'P/B': '3.62',
      DTtrenCP: '115.46',
      'P/S': '0.91',
      OCF: '1075617202176.00',
      'P/CF': '0.05',
      'Dividend Yield (%)': '0.96',
      TyleCPluuhanh: '541611328.00',
      'Free-Float': '261919296.00',
      Beta: '0.60',
      'Bienloinhuangop (%)': '0.55',
      'Bienloinhuanhoatdong %': '0.40',
      'ROA (%)': '0.45',
      'ROE (%)': '2.25',
      Tangtruongdoanhthutheoquy: '55.78',
      LNGtrenCP: '5.39',
      TangtruongLNhangquy: '0.00',
      San: 'HSX',
      LinhVuc: '5000 Dich vu Tieu dung',
      Nganh: 'Hang khong cho khach',
    },
    {
      Ticker: 'VNM',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '71.00',
      Volume: '3048400',
      GiatriGD: '216436391936',
      'Tang/Giam': '0.00',
      'Tang/Giam (%)': '0.00',
      PPSEPA: '0',
      RSRating: '1.69',
      "RS-O'neil": '-0',
      RSI: '65.55',
      MACD: '0.96',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '1',
      Trend: '0',
      ADX: '26.66',
      'DMI ': '32.27',
      'DMI-': '11.59',
      MFI: '66.47',
      MA10: '1',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '1',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '4.25',
      'P/E': '16.72',
      BookValuePerShare: '16.76',
      'P/B': '4.24',
      DTtrenCP: '28.89',
      'P/S': '2.46',
      OCF: '485275697152.00',
      'P/CF': '0.31',
      'Dividend Yield (%)': '0.70',
      TyleCPluuhanh: '2089955456.00',
      'Free-Float': '870688832.00',
      Beta: '0.60',
      'Bienloinhuangop (%)': '14.94',
      'Bienloinhuanhoatdong %': '18.06',
      'ROA (%)': '17.54',
      'ROE (%)': '26.16',
      Tangtruongdoanhthutheoquy: '0.67',
      LNGtrenCP: '11.74',
      TangtruongLNhangquy: '24.44',
      San: 'HSX',
      LinhVuc: '3000 Hang Tieu dung',
      Nganh: 'San pham thuc pham',
    },
    {
      Ticker: 'VPB',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '19.25',
      Volume: '12770300',
      GiatriGD: '245828272128',
      'Tang/Giam': '-0.25',
      'Tang/Giam (%)': '-1.28',
      PPSEPA: '0',
      RSRating: '1.93',
      "RS-O'neil": '7',
      RSI: '44.64',
      MACD: '0.05',
      MACDcatlen: '0',
      MACDnamtren: '0',
      MACDcatxuong: '0',
      MACDnamduoi: '1',
      Sideway: '0',
      Trend: '0',
      ADX: '19.51',
      'DMI ': '28.32',
      'DMI-': '20.09',
      MFI: '51.52',
      MA10: '0',
      MA15: '0',
      MA20: '0',
      MA50: '1',
      MA100: '0',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '1.27',
      'P/E': '15.19',
      BookValuePerShare: '17.64',
      'P/B': '1.09',
      DTtrenCP: '0.00',
      'P/S': '1.#J',
      OCF: '-30763737153536.00',
      'P/CF': '-0.00',
      'Dividend Yield (%)': '5.19',
      TyleCPluuhanh: '7933923840.00',
      'Free-Float': '1706423808.00',
      Beta: '1.03',
      'Bienloinhuangop (%)': '0.00',
      'Bienloinhuanhoatdong %': '0.00',
      'ROA (%)': '1.39',
      'ROE (%)': '8.26',
      Tangtruongdoanhthutheoquy: '0.00',
      LNGtrenCP: '0.00',
      TangtruongLNhangquy: '-10.40',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Ngan hang',
    },
    {
      Ticker: 'VRE',
      'Date/Time': '2/26/2024 00:00:00',
      Giahientai: '26.00',
      Volume: '14172600',
      GiatriGD: '368487628800',
      'Tang/Giam': '0.55',
      'Tang/Giam (%)': '2.16',
      PPSEPA: '0',
      RSRating: '1.32',
      "RS-O'neil": '-3',
      RSI: '67.18',
      MACD: '0.64',
      MACDcatlen: '0',
      MACDnamtren: '1',
      MACDcatxuong: '0',
      MACDnamduoi: '0',
      Sideway: '0',
      Trend: '0',
      ADX: '28.60',
      'DMI ': '36.98',
      'DMI-': '14.81',
      MFI: '64.38',
      MA10: '1',
      MA15: '1',
      MA20: '1',
      MA50: '1',
      MA100: '1',
      MA200: '0',
      ChamdaiduoiBB: '0',
      ChamdaitrenBB: '0',
      NoSupply: '0',
      GiaCaoNhat52W: '0',
      GiaThapHon52W: '0',
      Pivotspocket: '0',
      Shakeoutconfirmed: '0',
      EPS: '1.94',
      'P/E': '13.40',
      BookValuePerShare: '16.65',
      'P/B': '1.56',
      DTtrenCP: '4.31',
      'P/S': '6.03',
      OCF: '260063002624.00',
      'P/CF': '0.23',
      'Dividend Yield (%)': '4.04',
      TyleCPluuhanh: '2272318464.00',
      'Free-Float': '908927360.00',
      Beta: '1.08',
      'Bienloinhuangop (%)': '45.03',
      'Bienloinhuanhoatdong %': '54.97',
      'ROA (%)': '9.76',
      'ROE (%)': '12.37',
      Tangtruongdoanhthutheoquy: '33.01',
      LNGtrenCP: '2.35',
      TangtruongLNhangquy: '34.96',
      San: 'HSX',
      LinhVuc: '8000 Tai chinh',
      Nganh: 'Dich vu bat Dong san',
    },
  ];
  buysellData = [];

  tempData = '';

  buysellImported = [];

  formatData(csvData) {
    const headers = csvData.split('\r\n')[0].split(',');

    // Tách các dòng còn lại thành mảng các đối tượng
    const dataArray = csvData.split('\r\n').slice(1);

    const result = dataArray.map((row) => {
      const values = row.split(',');
      const obj = {};
      headers.forEach((header, index) => {
        obj[header] = values[index];
      });
      return obj;
    });
    return result;
  }

  async getStocks() {
    const data = this.stockData.map((item) => item.Ticker);
    return data;
  }

  async getStockByName(stocks: string[]) {
    return this.stockData.filter((item) => stocks.includes(item.Ticker));
  }

  async sendStock() {
    this.stockData = this.formatData(this.tempData);
    this.tempData = '';
    console.log(this.stockData.length);

    await this.eventsGateway.sendStockUpdateSignal();
  }

  async updateStock(data) {
    if (data.data == 'done') {
      this.sendStock();
    } else {
      this.tempData += data.data;
    }
  }

  //BUYSELL

  async updateBuysell(data) {
    console.log(data.data);

    const newData = this.formatData(data.data);
    this.buysellData = newData;
    this.buysellData = newData
      .filter((item) => item.Ticker !== '')
      .map((item) => {
        return {
          ticker: item.Ticker,
          date: moment(new Date(item['Date/Time'])).toISOString(),
          // moment(item['Date/Time'].split(' ')[0]).toISOString(),
          price: item.Close,
          status: item['Mua - Ban'],
        };
      });
    console.log(this.buysellData);

    await this.eventsGateway.sendBuysellToAllClients(this.buysellData);
  }

  async getBuysell(dateFilter: string, ticker: string, limitNumber: string) {
    let whereCondition = {}; // Điều kiện tìm kiếm mặc định là trống
    console.log(dateFilter);
    console.log(limitNumber);

    // Nếu dateFilter hoặc ticker không null, thêm điều kiện tìm kiếm tương ứng
    if (dateFilter !== undefined) {
      whereCondition = { ...whereCondition, date: dateFilter };
    }

    if (ticker !== undefined) {
      whereCondition = { ...whereCondition, ticker: ticker };
    }
    const options = {
      where: whereCondition,
      order: [['date', 'DESC']] as OrderItem[], // Sắp xếp theo ngày mới nhất
    };

    if (limitNumber !== undefined) {
      options['limit'] = Number(limitNumber);
    }

    const buysell = await this.buysellModel.findAll(options);
    return buysell;
  }

  async importBuysell(data) {
    if (data[data.length - 1]?.header === 'done') {
      const pushData = data.slice(0, data.length - 1);
      this.buysellImported.push(...pushData);
      const newData = this.buysellImported;
      this.buysellImported = [];
      try {
        await this.buysellModel.truncate();
        const results = await this.buysellModel.bulkCreate(newData);

        return results.length;
      } catch (error) {
        throw error;
      }
    } else {
      this.buysellImported.push(...data);
    }
  }

  async getBuysellProfitRealtime() {
    return this.stockData.map((item) => {
      return {
        ticker: item.Ticker,
        date: item['Date/Time'],
        price: item.Giahientai,
      };
    });
  }
}
